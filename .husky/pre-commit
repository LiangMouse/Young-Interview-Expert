#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# è¿è¡Œ lint-staged (æ ¼å¼åŒ–å’Œ lint)
echo "ğŸ“ Running lint and format..."
npx lint-staged

if [ $? -ne 0 ]; then
  echo "âŒ Lint/format failed!"
  exit 1
fi

# è¿è¡Œå•å…ƒæµ‹è¯•
echo "ğŸ§ª Running unit tests..."
pnpm test

if [ $? -ne 0 ]; then
  echo "âŒ Unit tests failed! Please fix them before committing."
  exit 1
fi

echo "âœ… Pre-commit checks passed!"
