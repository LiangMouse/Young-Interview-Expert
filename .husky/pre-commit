#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# è¿è¡Œ lint-staged (æ ¼å¼åŒ–å’Œ lint)
echo "ğŸ“ Running lint and format..."
pnpm lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ Lint/format failed!"
  exit 1
fi

# ç±»å‹æ£€æŸ¥
echo "ğŸ”§ Running type check..."
pnpm type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type check failed!"
  exit 1
fi

# æ„å»ºæ£€æŸ¥
echo "ğŸ—ï¸  Running build check..."
pnpm build
if [ $? -ne 0 ]; then
  echo "âŒ Build failed! Please fix the build errors before committing."
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
